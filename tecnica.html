<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Matchmaking â€” Parte TÃ©cnica</title>
<link rel="stylesheet" href="css/tecnica.css">
</head>
<body>
<header class="header">
   <div class="nav-wrapper container">
    <div class="logo-wrapper">
  <img src="assets/logo.png" alt="Logo do Projeto" class="logo-img">
  <span class="logo-text">Matchmaking â€” DossiÃª Clash Royale</span>
</div>
    <nav class="nav-links">
      <a class="nav-link" href="index.html">Home</a>
      <a class="nav-link active" href="tecnica.html">TÃ©cnica</a>
      <a class="nav-link" href="psicologia.html">Psicologia</a>
      <a class="nav-link" href="conclusao.html">ConclusÃ£o</a>
      <a class="nav-link" href="investigadores.html">Investigadores</a>
    </nav>
  </div>
</header>

<main class="container">
  <section class="hero">
    <h1>Parte TÃ©cnica â€” A Engenharia do Sistema</h1>
    <p>Esta pÃ¡gina explica, em linguagem simples, como funciona o sistema tÃ©cnico de matchmaking e todos os seus blocos importantes. Ao final vocÃª terÃ¡: a arquitetura essencial, o passo-a-passo do pipeline, um algoritmo explicativo (pseudocÃ³digo simples), noÃ§Ãµes matemÃ¡ticas, problemas prÃ¡ticos, DER conceitual e mockups anotados.</p>
  </section>

  <!-- Card: Arquitetura -->
  <section class="section">
    <article class="card">
      <h2>Arquitetura tÃ©cnica (visÃ£o geral)</h2>
      <p>Pense no sistema de matchmaking como uma linha de montagem com vÃ¡rias etapas â€” cada uma com uma funÃ§Ã£o bem definida. Aqui estÃ£o os blocos principais, explicados de forma simples:</p>
      <ul>
        <li><strong>Cliente (jogador)</strong> â€” quando o jogador clica em â€œJogarâ€, o app envia um ticket com informaÃ§Ãµes bÃ¡sicas: PlayerID, modo, ping, party_id e snapshot do MMR/trophies.</li>
        <li><strong>Validador / Gateway</strong> â€” checa coisas rÃ¡pidas: jogador estÃ¡ banido? estÃ¡ no modo correto? ping tolerÃ¡vel?</li>
        <li><strong>Fila distribuÃ­da (Queue)</strong> â€” o ticket entra em buckets por regiÃ£o e modo.</li>
        <li><strong>Matcher</strong> â€” o cÃ©rebro que pega tickets e tenta formar partidas. Usa janelas de MMR e regras de party/duo.</li>
        <li><strong>Score de Qualidade (MQS)</strong> â€” para cada combinaÃ§Ã£o calcula um score que representa â€œquÃ£o boaâ€ Ã© a partida.</li>
        <li><strong>Alocador de servidores</strong> â€” seleciona servidor com menor latÃªncia mÃ©dia e disponibilidade.</li>
        <li><strong>Orquestrador</strong> â€” cria a partida no servidor, avisa os jogadores e, no fim, atualiza dados (MMR, logs).</li>
      </ul>
      <p>Resumo visual: abaixo hÃ¡ um espaÃ§o para vocÃª colocar o fluxograma completo que descreve os 12 passos do processo.</p>
    
      <img class="placeholder" src="assets/fluxograma.png" alt="Fluxograma do Matchmaking">
    </article>
  </section>

 
  <section class="section">
    <article class="card">
      <h2>Regras que guiam o fluxograma</h2>
      <p> Outras regras nao mostradas no fluxograma:</p>
      <ul>
        <li><strong>1.</strong>  Prioridade para quem espera hÃ¡ mais tempo.</li>
        <li><strong>2.</strong>  CombinaÃ§oes precisam atingir um MQS minimo.</li>
        <li><strong>3.</strong>  A janela de MMR aumenta de forma progressiva.</li>
        <li><strong>4</strong>  Partidas sÃ³ sÃ£o criadas se todos aceitarem..</li>
        <li><strong>5.</strong>  O sistema sempre tenta usar o servidor com menor ping mÃ©dio.</li>
      </ul>

      <h3> SituaÃ§Ãµes especiais do processo:</h3>
       <ul>
        <li><strong>Fila longa:</strong> o sistema continua expandindo a janela atÃ© encontrar jogadores.</li>
        <li><strong>Party desbalanceada:</strong> apply regras de compensaÃ§Ã£o no MQS.</li>
        <li><strong>Ping alto:</strong> tenta outro servidor antes de criar a partida.</li>
        <li><strong>Recusa de um jogador:</strong> retorna somente os tickets afetados.</li>

       </ul>
    
    </article>
  </section>

 <!-- Card: 6.3 â€” Estabilidade da conexÃ£o e regras de entrada -->
<section class="section">
  <article class="card">
    <h2>Estabilidade da conexÃ£o e regras de entrada</h2>
    <p>Antes de confirmar uma partida, o sistema checa a qualidade da conexÃ£o dos jogadores para reduzir quedas, lag e partidas inseguras.</p>

    <ol>
      <li><strong>Ping atual e variaÃ§Ã£o:</strong> monitora latÃªncia e oscilaÃ§Ãµes nos Ãºltimos segundos.</li>
      <li><strong>Perda de pacotes:</strong> verifica taxa de packet loss para evitar jogadores com conexÃµes instÃ¡veis.</li>
      <li><strong>Tipo de conexÃ£o:</strong> identifica Wi-Fi instÃ¡vel vs. rede mÃ³vel e aplica regras diferenciadas.</li>
      <li><strong>HistÃ³rico recente:</strong> avalia quedas/abandono recentes para estimar risco de desconexÃ£o.</li>
      <li><strong>Risco de desconexÃ£o:</strong> combina mÃ©tricas acima em um score que indica se o jogador Ã© seguro para a partida.</li>
      <li><strong>AÃ§Ãµes automÃ¡ticas:</strong>
        <ul>
          <li>adiar o match por alguns segundos para estabilizaÃ§Ã£o;</li>
          <li>recolocar o jogador em uma fila mais tolerante;</li>
          <li>excluir o jogador da combinaÃ§Ã£o atual se o risco for alto.</li>
        </ul>
      </li>
    </ol>

    <p><em>Objetivo:</em> formar partidas somente quando todos os jogadores tiverem conexÃ£o mÃ­nima aceitÃ¡vel, reduzindo rematches e frustraÃ§Ã£o.</p>
  </article>
</section>


  <!-- Card: MQS & Janelas -->
  <section class="section">
    <article class="card">
      <h2>Match Quality Score (MQS) e Janelas de MMR</h2>
      <p>O MQS Ã© um nÃºmero que indica â€œquÃ£o boaâ€ Ã© essa partida potencial. Ele mistura fatores como diferenÃ§a de habilidade, latÃªncia mÃ©dia, tamanho de parties, risco de smurf, e tempo de fila (bÃ´nus para quem espera muito).</p>
      <p>FÃ³rmula didÃ¡tica (exemplo):</p>
       <img class="placeholder" src="assets/formula.png" alt="formula">
      <p>Janelas de MMR (estratÃ©gia tÃ­pica):</p>
      <ul>
        <li>Janela inicial: Â±25</li>
        <li>ApÃ³s 10â€“20s: Â±50</li>
        <li>ApÃ³s 30â€“60s: Â±100</li>
        <li>Depois disso: expandir somente se necessÃ¡rio</li>
      </ul>
      <p>Motivo: manter a janela pequena produz partidas mais equilibradas; ampliar reduz tempo de espera em pools escassos.</p>
    </article>
  </section>

  <!-- Card: MatemÃ¡tica & Smurfs -->
  <section class="section">
    <article class="card">
      <h2>MatemÃ¡tica do Matchmaking & DetecÃ§Ã£o de Smurfs (resumo)</h2>
      <h3>Conceitos essenciais</h3>
      <p>Elo/MMR: nÃºmeros que representam habilidade estimada.</p>
      <p>Incerteza (sigma): contas novas tÃªm alta incerteza, sistemas como Glicko usam sigma para ajustar a confianÃ§a.</p>
      <p>Probabilidade de vitÃ³ria: dada a diferenÃ§a de MMR, estimamos chance de vencer â€” isso alimenta alteraÃ§Ãµes de MMR.</p>

      <h3>7.2 â€” DetecÃ§Ã£o de smurfs (estratÃ©gias prÃ¡ticas)</h3>
      <ul>
        <li>Idade da conta + velocidade de subida de trofÃ©us â€” sinais fortes.</li>
        <li>Performance anormal (consistÃªncia alÃ©m do razoÃ¡vel) â€” anÃ¡lise estatÃ­stica.</li>
        <li>PadrÃµes de IP/dispositivo â€” mÃºltiplas contas relacionadas.</li>
        <li>Score de smurfRisk agregado; se alto, medidas como pools separados ou shadow pool.</li>
      </ul>
    </article>
  </section>

  <!-- Card: Problemas e mitigaÃ§Ã£o -->
  <section class="section">
    <article class="card">
      <h2>Problemas do Matchmaking e abordagens</h2>
      <ul>
        <li><strong>Smurfs</strong> â€” detectar com smurfRisk e colocar em pool especial.</li>
        <li><strong>Boosting</strong> â€” detectar padrÃµes e auditar manualmente.</li>
        <li><strong>Toxicidade / AFK</strong> â€” penalidades automÃ¡ticas, reputaÃ§Ã£o reduzida.</li>
        <li><strong>Fila longa</strong> â€” expandir janela progressivamente, oferecer modos alternativos.</li>
        <li><strong>VariÃ¢ncia</strong> â€” considerar MMR por performance alÃ©m de vitÃ³ria/derrota.</li>
        <li><strong>Duos / parties</strong> â€” ajustar MQS para compensar vantagem de coordenaÃ§Ã£o.</li>
      </ul>
    </article>
  </section>
<!-- Card: DER Conceitual Atualizado -->
<section class="section">
  <article class="card">

    <h2>MODELO DE DADOS (DER Conceitual)</h2>

    <p>A seguir estÃ¡ o modelo conceitual real do sistema de matchmaking, composto por 9 entidades, seus atributos conceituais, descriÃ§Ãµes e os relacionamentos com cardinalidades mÃ­n./mÃ¡x.</p>


    <!-- ENTIDADES -->
    <h3>ğŸŒ ENTIDADES (E01â€“E09)</h3>

    <h3>ğŸ”µ E01 â€” PLAYER</h3>
    <p><strong>DescriÃ§Ã£o:</strong> representa cada jogador existente no sistema, com informaÃ§Ãµes bÃ¡sicas e identificadoras.</p>
    <ul>
      <li>player_id</li>
      <li>nickname</li>
      <li>tag</li>
      <li>regiÃ£o</li>
      <li>plataforma</li>
      <li>nÃ­vel_conta</li>
      <li>status</li>
    </ul>

    <h3>ğŸ”µ E02 â€” PLAYER_MMR</h3>
    <p><strong>DescriÃ§Ã£o:</strong> registra o MMR do jogador por modo e sua incerteza (sigma).</p>
    <ul>
      <li>mmr_id</li>
      <li>mmr_atual</li>
      <li>mmr_sigma</li>
      <li>mmr_peak</li>
      <li>mmr_min</li>
      <li>Ãºltima_atualizaÃ§Ã£o</li>
    </ul>

    <h3>ğŸ”µ E03 â€” PARTY</h3>
    <p><strong>DescriÃ§Ã£o:</strong> grupo temporÃ¡rio de jogadores que entram juntos na fila.</p>
    <ul>
      <li>party_id</li>
      <li>tamanho</li>
      <li>criacao</li>
      <li>mmr_medio</li>
      <li>latÃªncia_media</li>
    </ul>

    <h3>ğŸ”µ E04 â€” PARTY_MEMBERS</h3>
    <p><strong>DescriÃ§Ã£o:</strong> associaÃ§Ã£o que representa membros pertencentes a uma Party.</p>
    <ul>
      <li>id_relacao</li>
      <li>funÃ§Ã£o_na_party</li>
    </ul>

    <h3>ğŸ”µ E05 â€” MODE_CONFIG</h3>
    <p><strong>DescriÃ§Ã£o:</strong> definiÃ§Ãµes e regras de cada modo (1v1, 2v2, desafios).</p>
    <ul>
      <li>mode_id</li>
      <li>nome</li>
      <li>team_size</li>
      <li>janela_mmr_inicial</li>
      <li>janela_mmr_maxima</li>
      <li>tempo_max_fila</li>
    </ul>

    <h3>ğŸ”µ E06 â€” QUEUE_TICKET</h3>
    <p><strong>DescriÃ§Ã£o:</strong> unidade fundamental de entrada na fila do matchmaking.</p>
    <ul>
      <li>ticket_id</li>
      <li>snapshot_mmr</li>
      <li>snapshot_latency</li>
      <li>smurf_risk</li>
      <li>connection_risk</li>
      <li>horario_entrada</li>
      <li>status</li>
    </ul>

    <h3>ğŸ”µ E07 â€” MATCH</h3>
    <p><strong>DescriÃ§Ã£o:</strong> partida criada pelo matchmaking.</p>
    <ul>
      <li>match_id</li>
      <li>hora_inicio</li>
      <li>qualidade_partida (MQS)</li>
      <li>duraÃ§Ã£o</li>
      <li>regiÃ£o_servidor</li>
    </ul>

    <h3>ğŸ”µ E08 â€” SERVER</h3>
    <p><strong>DescriÃ§Ã£o:</strong> servidores e disponibilidade por regiÃ£o onde a partida Ã© hospedada.</p>
    <ul>
      <li>server_id</li>
      <li>regiÃ£o</li>
      <li>capacidade</li>
      <li>ping_mÃ©dio</li>
    </ul>

    <h3>ğŸ”µ E09 â€” MATCH_PLAYERS</h3>
    <p><strong>DescriÃ§Ã£o:</strong> representa os jogadores na partida e seus resultados.</p>
    <ul>
      <li>match_player_id</li>
      <li>time</li>
      <li>resultado</li>
      <li>mmr_before</li>
      <li>mmr_after</li>
      <li>desempenho</li>
    </ul>


    <!-- RELACIONAMENTOS -->
    <h3>ğŸ“Œ RELACIONAMENTOS (com cardinalidades mÃ­n. e mÃ¡x.)</h3>

    <p><em>Formato: EntidadeA (minA..maxA) â€” Relacionamento â€” (minB..maxB) EntidadeB</em></p>

    <ul>
      <li><strong>R01 â€” Player possui MMR por modo</strong><br>
        PLAYER (1..1) â€” possui â€” (0..N) PLAYER_MMR</li>

      <li><strong>R02 â€” Player entra na fila (Ticket)</strong><br>
        PLAYER (1..1) â€” gera â€” (0..N) QUEUE_TICKET</li>

      <li><strong>R03 â€” Party envia tickets</strong><br>
        PARTY (0..1) â€” gera â€” (0..N) QUEUE_TICKET</li>

      <li><strong>R04 â€” Party Ã© formada por jogadores</strong><br>
        PARTY (1..N) â€” possui â€” (1..1) PARTY_MEMBERS â€” (1..1) PLAYER</li>

      <li><strong>R05 â€” Modo define vÃ¡rios MMRs</strong><br>
        MODE_CONFIG (1..1) â€” configura â€” (0..N) PLAYER_MMR</li>

      <li><strong>R06 â€” Modo define tickets</strong><br>
        MODE_CONFIG (1..1) â€” classifica â€” (0..N) QUEUE_TICKET</li>

      <li><strong>R07 â€” Modo gera partidas</strong><br>
        MODE_CONFIG (1..1) â€” gera â€” (0..N) MATCH</li>

      <li><strong>R08 â€” Match Ã© hospedada em Server</strong><br>
        SERVER (1..1) â€” hospeda â€” (0..N) MATCH</li>

      <li><strong>R09 â€” Match contÃ©m jogadores</strong><br>
        MATCH (1..1) â€” inclui â€” (1..N) MATCH_PLAYERS â€” representa â€” (1..1) PLAYER</li>
    </ul>


    <!-- RESUMO TABELA -->
    <h3>ğŸ”¥ RESUMO FINAL (Tabela)</h3>

    <ul>
      <li>R01 â€” Player â†” Player_MMR â€” 1..1 â†’ 0..N</li>
      <li>R02 â€” Player â†” Queue_Ticket â€” 1..1 â†’ 0..N</li>
      <li>R03 â€” Party â†” Queue_Ticket â€” 0..1 â†’ 0..N</li>
      <li>R04 â€” Party â†” Player (via Party_Members) â€” Party 1..N â†” Player 1..1</li>
      <li>R05 â€” Mode â†” Player_MMR â€” 1..1 â†’ 0..N</li>
      <li>R06 â€” Mode â†” Queue_Ticket â€” 1..1 â†’ 0..N</li>
      <li>R07 â€” Mode â†” Match â€” 1..1 â†’ 0..N</li>
      <li>R08 â€” Server â†” Match â€” 1..1 â†’ 0..N</li>
      <li>R09 â€” Match â†” Player (via Match_Players) â€” Match 1..N â†” Player 1..N</li>
    </ul>

    <p><strong>Essas entidades cobrem o estado do jogador, fila, formaÃ§Ã£o da partida, modos, servidores e resultados finais.</strong></p>

    <p> Aqui esta a tabela em forma conceitual:</p>
    <img class="placeholder" src="assets/der.png" alt="DER conceitual">

  </article>
</section>


  <!-- Card: Mockups anotados -->
  <section class="section">
    <article class="card">
      <h2>15 â€” Mockups do Sistema (anotados)</h2>
      <p>As telas que vocÃª deve produzir com base nesses dados:</p>

      <h3>Tela 1 â€” Lobby / Fila</h3>
      
      <p></p>
      <img class="placeholder" src="assets/mockup_lobby.png" alt="Mockup Lobby">

      <h3>Tela 2 â€” PrÃ©-partida</h3>
      
      <p></p>
      <img class="placeholder" src="assets/mockup_pre.png" alt="Mockup PrÃ©-partida">

      <h3>Tela 3 â€” PÃ³s-partida</h3>
      
      <p></p>
      <img class="placeholder" src="assets/mockup_post.png" alt="Mockup PÃ³s-partida">
    </article>
  </section>

  <footer class="footer">
    <div>Matchmaking â€” Parte TÃ©cnica â€¢ DossiÃª Clash Royale</div>
  </footer>
</main>
</body>
</html>
